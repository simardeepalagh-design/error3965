/* =========================================
   SCI-FI MISSION CONTROL THEME
   ========================================= */

@import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Share+Tech+Mono&display=swap');

:root {
    --primary-color: #00f0ff;
    --secondary-color: #0055ff;
    --accent-color: #ff0055;
    --bg-color: #050510;
    --text-color: #e0e0ff;
    --grid-color: rgba(0, 240, 255, 0.1);
    --scanline-color: rgba(0, 0, 0, 0.5);
    --font-heading: 'Orbitron', sans-serif;
    --font-mono: 'Share Tech Mono', monospace;
}

* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

body {
    background-color: var(--bg-color);
    color: var(--text-color);
    font-family: var(--font-mono);
    height: 100vh;
    overflow: hidden;
    /* Prevent scrolling, controlled by JS/Interface */
    position: relative;
}

/* --- BACKGROUNDS & EFFECTS --- */

.stars {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: radial-gradient(ellipse at bottom, #1b2735 0%, #090a0f 100%);
    z-index: -2;
    overflow: hidden;
}

/* Generating stars using box-shadow for performance/simplicity in CSS-only approach would be huge, 
   so we'll use a simple repeating pattern or pseudo-elements. 
   Here uses a simple animated background image approach or simple noise. */
.stars {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    /* Layered backgrounds for parallax */
    background-image:
        radial-gradient(white, rgba(255, 255, 255, .2) 2px, transparent 3px),
        radial-gradient(white, rgba(255, 255, 255, .15) 1px, transparent 2px),
        radial-gradient(white, rgba(255, 255, 255, .1) 2px, transparent 3px);
    background-size: 550px 550px, 350px 350px, 250px 250px;
    background-position: 0 0, 40px 60px, 130px 270px;
    opacity: 0.8;
    transition: background-position 2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    /* Smooth slide */
}

/* We don't need the pseudo-element anymore if we apply directly to .stars for easier JS control,
   OR we keep it and target .stars::after which is harder from JS. 
   Let's move styles to .stars itself above for easier parallax control. */


.grid-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background:
        linear-gradient(90deg, var(--grid-color) 1px, transparent 1px),
        linear-gradient(0deg, var(--grid-color) 1px, transparent 1px);
    background-size: 40px 40px;
    perspective: 1000px;
    transform: perspective(500px) rotateX(20deg) scale(1.5) translateY(-10%);
    /* Pseudo 3D floor effect if wanted, but simpler grid is better for overlay */
    transform: none;
    /* Resetting for flat overlay */
    z-index: -1;
    pointer-events: none;
}

.scanlines {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(to bottom,
            rgba(255, 255, 255, 0),
            rgba(255, 255, 255, 0) 50%,
            rgba(0, 0, 0, 0.2) 50%,
            rgba(0, 0, 0, 0.2));
    background-size: 100% 4px;
    z-index: 100;
    pointer-events: none;
    animation: scanlineMove 10s linear infinite;
    /* Subtle movement */
}

@keyframes scanlineMove {
    0% {
        background-position: 0 0;
    }

    100% {
        background-position: 0 100%;
    }
}

/* --- UI LAYOUT --- */

.interface-container {
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    padding: 20px;
    border: 2px solid var(--primary-color);
    box-shadow: 0 0 20px var(--primary-color), inset 0 0 50px rgba(0, 240, 255, 0.2);
    position: relative;
    overflow: hidden;
}

/* Corner decorations */
.corner-tl,
.corner-tr,
.corner-bl,
.corner-br {
    position: absolute;
    width: 30px;
    height: 30px;
    border: 3px solid var(--primary-color);
}

.corner-tl {
    top: 0;
    left: 0;
    border-right: none;
    border-bottom: none;
}

.corner-tr {
    top: 0;
    right: 0;
    border-left: none;
    border-bottom: none;
}

.corner-bl {
    bottom: 0;
    left: 0;
    border-right: none;
    border-top: none;
}

.corner-br {
    bottom: 0;
    right: 0;
    border-left: none;
    border-top: none;
}

header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 20px;
    border-bottom: 1px solid var(--primary-color);
    background: rgba(0, 85, 255, 0.1);
    font-family: var(--font-heading);
    text-transform: uppercase;
    letter-spacing: 2px;
}

.system-status span {
    color: var(--primary-color);
    font-size: 0.8rem;
    animation: blink 2s infinite;
}

@keyframes blink {

    0%,
    100% {
        opacity: 1;
    }

    50% {
        opacity: 0.3;
    }
}

/* --- MAIN MISSION AREA --- */

.main-display {
    flex: 1;
    display: flex;
    position: relative;
    overflow: hidden;
}

/* Timeline Track - Now Subtle Guide */
.timeline-container {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 10;
    pointer-events: none;
}

.timeline-markers {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 11;
}

/* Markers follow the diagonal path now - adjusted in JS, but style remains dot */
.timeline-marker {
    position: absolute;
    /* Left/Bottom set by JS */
    width: 14px;
    height: 14px;
    background: var(--bg-color);
    border: 2px solid var(--primary-color);
    border-radius: 50%;
    transition: all 1s ease-in-out;
    box-shadow: 0 0 10px var(--primary-color);
    z-index: 12;
}

.timeline-marker.active {
    background: var(--accent-color);
    border-color: var(--accent-color);
    box-shadow: 0 0 10px var(--accent-color);
}

.timeline-marker.passed {
    background: var(--primary-color);
}

.marker-label {
    position: absolute;
    left: 20px;
    top: -5px;
    font-size: 0.8rem;
    color: var(--primary-color);
    white-space: nowrap;
    opacity: 0.7;
}

.timeline-progress {
    /* Progress bar might look weird on diagonal. Let's hide the bar, use markers and rocket only. */
    display: none;
}

/* Particles / Space Matter */
.particles-container {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 15;
    /* Behind rocket (20) but above background */
    overflow: hidden;
}

.particle {
    position: absolute;
    width: 4px;
    height: 4px;
    background: rgba(200, 240, 255, 0.8);
    box-shadow: 0 0 4px white;
    border-radius: 2px;
    pointer-events: none;
}

/* Rocket */
.rocket-wrapper {
    position: absolute;
    /* Position controlled by JS now */
    z-index: 20;
    text-align: center;
    transition: all 1.5s cubic-bezier(0.45, 0, 0.55, 1);
    transform-origin: center center;
}

.rocket-icon {
    font-size: 50px;
    color: var(--text-color);
    filter: drop-shadow(0 0 15px var(--secondary-color));
    transform: rotate(45deg);
    /* Default angle for diagonal ascent */
}

.rocket-flame {
    /* Replaced with engine glow, no red block */
    width: 20px;
    height: 20px;
    background: radial-gradient(circle, white 0%, var(--primary-color) 40%, transparent 70%);
    margin: -10px auto 0;
    border-radius: 50%;
    box-shadow: 0 0 20px var(--primary-color), 0 0 40px var(--secondary-color);
    opacity: 0;
    transition: opacity 0.5s;
    /* Position relative to rocket icon rotation */
    position: absolute;
    left: 50%;
    bottom: -5px;
    transform: translateX(-50%);
    z-index: -1;
    transition: all 0.5s ease;
}

/* Rocket Movement Effects */
.rocket-wrapper.boosting {
    animation: rocketShake 0.1s infinite;
}

.rocket-wrapper.boosting .rocket-flame {
    height: 60px;
    width: 25px;
    opacity: 1;
    box-shadow: 0 0 30px var(--primary-color), 0 0 60px var(--secondary-color);
    background: radial-gradient(circle, white 0%, cyan 30%, blue 80%, transparent 100%);
}

.rocket-wrapper.boosting .rocket-icon {
    /* Slight bank/tilt adjustment during flight if desired */
    transform: rotate(48deg);
    filter: drop-shadow(0 0 20px cyan);
}

@keyframes rocketShake {
    0% {
        transform: translate(1px, 1px) rotate(0deg);
    }

    /* We handle rotation on icon, so wrapper shake is just xy */
    25% {
        transform: translate(-1px, -2px) rotate(-1deg);
    }

    50% {
        transform: translate(-2px, 0px) rotate(1deg);
    }

    75% {
        transform: translate(2px, 1px) rotate(0deg);
    }

    100% {
        transform: translate(1px, -1px) rotate(-1deg);
    }
}

@keyframes flameFlicker {
    0% {
        height: 30px;
        transform: scaleX(1);
        opacity: 0.8;
    }

    100% {
        height: 40px;
        transform: scaleX(1.2);
        opacity: 1;
    }
}

/* Current Mission Card - Repositioned to avoid overlaps */
.mission-card {
    position: absolute;
    top: 15%;
    right: 5%;
    /* Fixed to Right Side */
    left: auto;
    transform: none;
    width: 350px;
    background: rgba(5, 10, 25, 0.95);
    /* More opaque */
    border: 1px solid var(--primary-color);
    padding: 25px;
    text-align: left;
    opacity: 0;
    pointer-events: none;
    transition: all 0.5s ease;
    clip-path: polygon(20px 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%, 0 20px);
    z-index: 50;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.8);
}

/* Alternating sides class can be added by JS if desired, 
   but centered is safer for the "Hologram" feel described. 
   We will utilize a distinct layout: Rocket Center, Card Overlay or Side.
   Let's position it slightly offset or switch based on mission. 
   For now, we'll keep it centered but z-indexed behind or clearly overlaying.
   Actually, let's put it to the RIGHT of the timeline for odd, LEFT for even?
   Or just Center top. Let's stick to Center Top for clarity in a vertical scroller feel.
*/
.mission-card.active {
    opacity: 1;
    pointer-events: auto;
    animation: slideInRight 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

@keyframes glitchIn {
    0% {
        clip-path: inset(50% 0 50% 0);
        transform: translateX(-50%) skew(20deg);
    }

    100% {
        clip-path: inset(0 0 0 0);
        transform: translateX(-50%) skew(0deg);
    }
}

@keyframes slideInRight {
    0% {
        transform: translateX(50px);
        opacity: 0;
    }

    100% {
        transform: translateX(0);
        opacity: 1;
    }
}

.agency-logo-placeholder {
    width: 60px;
    height: 60px;
    border: 2px dashed var(--primary-color);
    border-radius: 50%;
    margin: 0 auto 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.8rem;
    color: var(--secondary-color);
    box-shadow: 0 0 5px var(--primary-color);
}

.mission-year {
    color: var(--accent-color);
    font-size: 1.2rem;
    font-weight: bold;
    margin-bottom: 5px;
    text-shadow: 0 0 5px var(--accent-color);
}

.mission-title {
    font-family: var(--font-heading);
    font-size: 2rem;
    margin-bottom: 15px;
    text-transform: uppercase;
    color: white;
    text-shadow: 0 0 10px var(--primary-color);
}

.mission-desc {
    font-size: 0.9rem;
    line-height: 1.5;
    color: #aaccff;
}

/* --- CONTROLS --- */

.controls {
    display: flex;
    justify-content: center;
    gap: 20px;
    padding: 20px;
    border-top: 1px solid var(--primary-color);
    background: rgba(0, 0, 0, 0.5);
    z-index: 100;
}

button {
    background: transparent;
    border: 1px solid var(--primary-color);
    color: var(--primary-color);
    font-family: var(--font-heading);
    font-size: 1.2rem;
    padding: 10px 30px;
    cursor: pointer;
    text-transform: uppercase;
    transition: all 0.3s;
    position: relative;
    overflow: hidden;
}

button:hover {
    background: var(--primary-color);
    color: var(--bg-color);
    box-shadow: 0 0 20px var(--primary-color);
}

button:disabled {
    border-color: #555;
    color: #555;
    cursor: not-allowed;
    background: transparent;
    box-shadow: none;
}

button::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
    transition: 0.5s;
}

button:hover::before {
    left: 100%;
}

/* --- ALTIMETER / SIDE PANELS --- */

.side-panel {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    width: 150px;
    padding: 10px;
    color: rgba(0, 240, 255, 0.7);
    font-size: 0.8rem;
    border-left: 2px solid rgba(0, 240, 255, 0.3);
}

.left-panel {
    left: 20px;
    text-align: right;
    border-left: none;
    border-right: 2px solid rgba(0, 240, 255, 0.3);
}

.right-panel {
    right: 20px;
    text-align: left;
}

.data-row {
    margin-bottom: 5px;
    display: flex;
    justify-content: space-between;
}

/* --- DASHBOARD STYLES --- */
.dashboard-title {
    text-align: center;
    font-size: 3rem;
    margin: 40px 0 20px;
    color: var(--primary-color);
    text-shadow: 0 0 20px var(--primary-color);
    text-transform: uppercase;
}

.mission-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 30px;
    padding: 20px 60px;
    max-width: 1400px;
    margin: 0 auto;
    overflow-y: auto;
    /* Enable scrolling for dashboard */
    height: calc(100% - 150px);
}

.dashboard-card {
    background: rgba(5, 10, 20, 0.8);
    border: 1px solid var(--primary-color);
    padding: 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: space-between;
    transition: all 0.3s ease;
    cursor: pointer;
    position: relative;
    overflow: hidden;
}

.dashboard-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 0 25px rgba(0, 240, 255, 0.3);
    border-color: var(--accent-color);
}

.dashboard-card h3 {
    font-family: var(--font-heading);
    font-size: 1.5rem;
    margin-bottom: 10px;
    color: white;
}

.dashboard-card .mission-year {
    font-size: 1rem;
    color: var(--secondary-color);
}

.dashboard-card .card-icon {
    font-size: 3rem;
    margin: 20px 0;
    filter: drop-shadow(0 0 10px var(--secondary-color));
}

.btn-access {
    margin-top: 15px;
    font-size: 0.9rem;
    padding: 8px 20px;
    width: 100%;
}

/* Scrollbar for dashboard */
.mission-grid::-webkit-scrollbar {
    width: 8px;
}

.mission-grid::-webkit-scrollbar-track {
    background: rgba(0, 0, 0, 0.5);
}

.mission-grid::-webkit-scrollbar-thumb {
    background: var(--primary-color);
    border-radius: 4px;
}

/* Nav Back Button for Subpages */
.nav-back {
    position: absolute;
    top: 15px;
    /* Aligned with header */
    left: 20px;
    z-index: 1000;
}

/* Push header content on mission pages to avoid overlap with Back button
   Using Grid to reserve left space explicitly */
body[data-mission] header {
    display: grid;
    grid-template-columns: 260px 1fr auto;
    /* Left Spacer | Title | Status */
    padding-left: 20px;
}

body[data-mission] .system-title {
    grid-column: 2;
    text-align: center;
}

body[data-mission] .system-status {
    grid-column: 3;
    text-align: right;
}

/* Ensure button has bg to cover any edge cases */
.nav-back button {
    background: rgba(5, 10, 20, 0.9);
    border: 1px solid var(--primary-color);
}